"use strict";angular.module("particleApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","angularMoment"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).otherwise({redirectTo:"/"})}]).constant("_",window._).run(["$rootScope",function(a){a._=window._}]),angular.module("particleApp").controller("MainCtrl",["$scope","$http","$rootScope","moment",function(a,b,c,d){function e(b){return k.find(a.devices,["id",b])}function f(c){var e="https://api.particle.io/v1/devices/"+c+"?access_token="+i;b.get(e).then(function(b){a.currentDeviceInfo=b.data,console.log("$scope.currentDeviceInfo"),console.log(a.currentDeviceInfo),g(c),a.functionNames=angular.forEach(b.data.functions,function(a){return a}),a.device.lastHeard={date:new d(b.data.lastHeard).format("MMMM, D YYYY"),time:new d(b.data.lastHeard).format("h:mm a")},a.device.status=b.data.status,a.device.lastIpAddress=b.data.last_ip_address,a.device.funcNames=b.data.functions})}function g(c){var d=Object.keys(a.currentDeviceInfo.variables)[0];console.log("device var: "+d);var e="https://api.particle.io/v1/devices/"+c+"/"+d+"?access_token="+i;b.get(e).then(function(b){a.variableValInfo=b.data,console.log("$scope.variableValInfo"),console.log(a.variableValInfo),a.device.varName=b.data.name,a.device.varResult=b.data.result})}function h(a){f(a)}var i="d6576383889e1526c95853391923584b508071c4",j="https://api.particle.io/v1/devices?access_token="+i,k=c._;a.device={},a.init=function(){b.get(j).then(function(b){a.devices=b.data,a.currentDevice=e(b.data[0].id),h(b.data[0].id)})},console.log(a),a.updateDevice=function(b){a.currentDevice=e(b),h(b)},a.submitFunc=function(c){if(a.text){var d="https://api.particle.io/v1/devices/"+a.currentDeviceInfo.id+"/"+c+'/?arg="'+this.text+'"&access_token='+i;b.post(d).then(function(b){console.log(b.data.return_value),a.currentDeviceInfo.functions[c]=b.data.return_value}),console.log(c),a.text="",console.log(a.currentDeviceInfo.functions),console.log(this.text)}}}]),angular.module("particleApp").controller("AboutCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("particleApp").service("api",["$http",function(a){function b(a){console.log(a)}function c(a){console.error(a)}var d="https://api.particle.io/v1/devices?access_token=d6576383889e1526c95853391923584b508071c4";a.jsonp(d).then(b(),c())}]),angular.module("particleApp").run(["$templateCache",function(a){a.put("views/about.html","<p>This is the about view.</p>"),a.put("views/main.html",'<div data-ng-controller="MainCtrl" data-ng-init="init()"> <div class="devices"> Available devices: <ul> <li ng-repeat="device in devices" ng-click="updateDevice(device.id)" ng-class="{active: device.id == currentDeviceInfo.id}"> <a href="javascript:;">{{device.name}}</a> </li> </ul> </div> <div class="conditions"> <div class="connected" ng-if="currentDevice.connected">Connected</div> <div class="disconnected" ng-if="!currentDevice.connected">Disconnected</div> </div> <div class="card-content"> <div class="row"> <div class="col-xs-12 col-sm-6 col-lg-4"> <div class="card"> <h3>Last Communication</h3> <div class="large">{{device.lastHeard.time}}</div> <div class="minor">{{device.lastHeard.date}}</div> </div> </div> <div class="col-xs-12 col-sm-6 col-lg-4"> <div class="card"> <h3>Status</h3> <div class="large">{{device.status}}</div> </div> </div> <div class="col-xs-12 col-sm-6 col-lg-4"> <div class="card"> <h3>Last IP Address</h3> <div class="large">{{device.lastIpAddress}}</div> </div> </div> <div class="col-xs-12 col-sm-6 col-lg-4"> <div class="card"> <h3>Variable: {{device.varName}}</h3> <div class="large">{{device.varResult}}</div> </div> </div> <div class="col-xs-12 col-sm-6 col-lg-4" ng-repeat="funcName in device.funcNames"> <div class="card" ng-controller="MainCtrl"> <h3>{{funcName}}</h3> <form ng-submit="submitFunc(funcName)"> <input type="text" ng-model="text" name="text"> <input type="submit" id="submit" value="Submit"> </form> {{currentDeviceInfo.functions[funcName]}} </div> </div> </div> </div> </div>')}]);